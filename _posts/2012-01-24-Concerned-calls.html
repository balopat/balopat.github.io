---           
layout: post
title: Concerned calls
date: 2012-01-24 17:42:00 UTC
updated: 2013-12-14 19:44:55 UTC
comments: false
categories: clean code refactoring separation of concerns
---

 
<p>I believe (yeah, kinda&#39; religiously) that having clean code is essential for maintainable codebase. I already knew that a main tool or line of thought in order to have clean code is to<strong> separate concerns</strong>. But you always learn something new.&#0160;</p><p>Think about the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle" target="_self">SRP</a>&#0160;which cuts apart responsibilities, or the list at the end of the <a href="http://en.wikipedia.org/wiki/Separation_of_concerns" target="_self">wiki page for separate of concerns</a>&#0160;or any kind of decoupling technique like<a href="http://en.wikipedia.org/wiki/Dependency_injection" target="_self"> dependency injection</a>. In all these cases you can find the &quot;world&quot; for a certain concern.</p><h2><a href="http://blog.balopat.com/.a/6a015392885777970b0163000fc123970d-popup" onclick="window.open( this.href, &#39;_blank&#39;, &#39;width=640,height=480,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0&#39; ); return false" style="float: left;"><img alt="Parallel-universe" class="asset  asset-image at-xid-6a015392885777970b0163000fc123970d" src="http://blog.balopat.com/.a/6a015392885777970b0163000fc123970d-400wi" style="width: 200px; margin: 0px 5px 5px 0px;" title="Parallel-universe" /></a>The worlds of concerns</h2><p>In the case of DI: &quot;business&quot; belongs to world of &quot;live code&quot; and &quot;dependency&quot; belongs to the world of &#0160;&quot;configuration&quot;.&#0160;These two worlds can move differently, if you just think about the different environments, like local test/integration-test/production...the code remains the same, dependency config can safely change!&#0160;</p><p>Nice and easy, but why I started this blogpost is that I recently created a piece of code with unseparated concerns and I was a bit bothered by the fact that&#0160;<a href="http://mashb.wordpress.com/" target="_self">Mash</a>&#0160;pointed it out ;) later I realized it worths a blogpost. The line of code was in an interface:&#0160;</p><p><code> String getBusinessKeyForDuplication();</code></p><h2>What are the two concerns?&#0160;</h2><p>The grammar tells us immediately:</p><ol><li>the business key&#0160;</li><li>whether the object implementing this interface is duplicate or not?</li></ol><p>So where is the cut here? What are the two worlds of the two concerns?&#0160;</p><p>The <strong>business key</strong> is the <strong>callee</strong>&#39;s concern who is part of the &quot;business logic &quot;.</p><p>The <strong>duplication check</strong> <em>is just one of the possible use cases</em> for the client, so it is the <strong>caller</strong>&#39;s concern.&#0160;</p><h2>Afterthoughts</h2><p>Right. The callee and the caller.</p><p>Something else is smelly here though. Why do I return a String instead of a proper key class? Concatenating a multi-part key was an easy decision because this interface will have to deal with multiple objects who might have quite different keys. In addition when I created it I was thinking only in duplicate checking which would suffice in a simple String.</p><p>On the other hand <em>I do not program against the interface anything yet</em>, currently every setup is specific&#0160;to the classes, why capture then this common behaviour in an interface?&#0160;</p><p>I will probably get rid of it.</p><p><a href="http://blog.balopat.com/.a/6a015392885777970b0163000fb2c9970d-popup" style="float: left;"><img alt="Kick-butt" class="asset  asset-image at-xid-6a015392885777970b0163000fb2c9970d" src="http://blog.balopat.com/.a/6a015392885777970b0163000fb2c9970d-400wi" style="width: 150px; margin: 0px 5px 5px 0px;" title="Kick-butt" /></a></p><p><strong>When so many things start to popup around an element, and you can easily kick it out, it usually shows that it is the artificial result of overthinking.</strong></p>